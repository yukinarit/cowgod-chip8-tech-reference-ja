# Chip-8の命令セット

## 0nnn - SYS addr

machine code routineの`nnn`にジャンプする。この命令はChip-8が最初に実装された古いコンピュータで使われたが、最近はもう使われていない。

## 00E0 - CLS

ディプレイをクリアする。

## 00EE - RET 
サブルーチンから戻る。プログラムカウンタにスタックの一番上のアドレスをセットし、スタックポインタから1を引く。

## 1nnn - JP addr

アドレス`nnn`にジャンプする。インタプリタはプログラムカウンタを`nnn`にする。

## 2nnn - CALL addr

アドレス`nnn`のサブルーチンをCallする。インタプリタはスタックポインタをインクリメントし、それから現在のプログラムカウンタをスタックの一番上に置く。さらにプログラムカウンタに`nnn`をセットする。

## 3xkk - SE Vx, byte

`Vx` = `kk`の場合、次の命令をスキップする。インタプリタはレジスタ`Vx`と`kk`を比較し、二つが等しいならプログラムカウンタを2進める。

## 4xkk - SNE Vx, byte

`Vx` != `kk`の場合、次の命令をスキップする。インタプリタはレジスタ`Vx`と`kk`を比較し、二つが異なるならプログラムカウンタを2進める。

## 5xy0 - SE Vx, Vy

`Vx` = `Vy`の場合、次の命令をスキップする。インタプリタはレジスタ`Vx`と`Vy`を比較し、二つが等しいならプログラムカウンタを2進める。

## 6xkk - LD Vx, byte

`Vx`に`kk`をセットする。インタプリタはレジスタ`Vx`に`kk`の値をセットする。

## 7xkk - ADD Vx, byte

`Vx`に`Vx` + `kk`をセットする。インタプリタはレジスタ`Vx`に`kk`の値を加算する。

## 8xy0 - LD Vx, Vy

`Vx`に`Vy`をセットする。インタプリタはレジスタ`Vx`に`Vy`の値をセットする。

## 8xy1 - OR Vx, Vy

`Vx`に`Vx` OR `Vy`をセットする。`Vx`と`Vy`のビット和をとり、`Vx`にセットする。ビット和は二つの値のビットを比較し、どちらかひとつでも1の場合は1、両方とも0の場合は0とする。

## 8xy2 - AND Vx, Vy

`Vx`に`Vx` AND `Vy`をセットする。`Vx`と`Vy`のビット積をとり、`Vx`にセットする。ビット積は二つの値のビットを比較し、両方とも1の場合は1、それ以外の場合は0とする。

## 8xy3 - XOR Vx, Vy

`Vx`に`Vx` XOR `Vy`をセットする。`Vx`と`Vy`の排他的ビット和をとり、`Vx`にセットする。排他的ビット和は二つの値のビットを比較し、等しくない場合は1、それ以外の場合は0とする。

## 8xy4 - ADD Vx, Vy

`Vx`に`Vx` + `Vy`をセットする。結果が8bit(255)より大きい場合は`Vf`に1、それ以外の場合は0をセットする。`Vx`には下位8bitのみ保持する。

## 8xy5 - SUB Vx, Vy

`Vx` > `Vy`の場合は`Vf`に1、それ以外の場合は0をセットする。`Vx`に`Vx` - `Vy`をセットする。

## 8xy6 - SHR Vx {, Vy}

`Vx`の最下位ビットが1だった場合は`Vf`に1、それ以外の場合は0をセットする。`Vx`に`Vx`を2で割った(または右ビットシフト)値をセットする。

## 8xy7 - SUBN Vx, Vy

`Vy` > `Vx`の場合`Vf`に1、それ以外の場合は0をセットする。`Vx`に`Vy` - `Vx`をセットする。

## 8xyE - SHL Vx {, Vy}

`Vx`の最上位ビットが1の場合`Vf`に1、それ以外の場合は0をセットする。`Vx`に2をかけた(または左ビットシフト)値をセットする。

## 9xy0 - SNE Vx, Vy

`Vx` != `Vy`の場合、次の命令をスキップする。つまり、プログラムカウンタを2インクリメントする。

## Annn - LD I, addr

`I`に`nnn`をセットする。

## Bnnn - JP V0, addr

`nnn` + `V0`のアドレスにジャンプする。つまり、プログラムカウンタに`nnn` + `V0`をセットする。

## Cxkk - RND Vx, byte

`Vx`に0~255の乱数 AND `kk`をセットする。AND演算については`8xy2`を参照。

## Dxyn - DRW Vx, Vy, nibble

アドレス`I`の`n`バイトのスプライトを(`Vx`, `Vy`)に描画する。`Vf`にはcollision(後述)をセットする。

アドレス`I`の`n`バイトのスプライトを読み出し、スプライトとして(`Vx`, `Vy`)に描画する。スプライトは画面にXORする。このとき、消されたピクセルが一つでもある場合は`Vf`に1、それ以外の場合は0をセットする。スプライトの一部が画面からはみ出る場合は、逆方向に折り返す。XORについては`8xy3`に詳しい。また、ディプレイの仕様に関しては2.4 Displayを参照のこと。

## Ex9E - SKP Vx

`Vx`が押された場合、次の命令をスキップする。

キーボードををチェックし、`Vx`の値のキーが押されていればプログラムカウンタを2インクリメントする。

## ExA1 - SKNP Vx

`Vx`が押されてない場合、次の命令をスキップする。

キーボードををチェックし、`Vx`の値のキーが押されていなければプログラムカウンタを2インクリメントする。

## Fx07 - LD Vx, DT

`Vx`にDelay timerの値`dt`をセットする。

## Fx0A - LD Vx, K

押されたキーを`Vx`にセットする。

キーが入力されるまで全ての実行をストップする。キーが押されるとその値を`Vx`にセットする。

## Fx15 - LD DT, Vx

Delay timer `dt`に`Vx`をセットする。

## Fx18 - LD ST, Vx

Sound timer `st`に`Vx`をセットする。

## Fx1E - ADD I, Vx

`I`に`I` + `Vx`をセットする。

## Fx29 - LD F, Vx

`I`に`Vx`のスプライト(fontset)のアドレスをセットする。

`I`の値に`Vx`の値に対応するスプライト(fontset)のアドレスをセットする。詳しくは[Display](2-4_display.md)を参照。

## Fx33 - LD B, Vx

アドレス`I`, `I+1`、`I+2`に`Vx`のBCDをセットする。

アドレス`I`に`Vx`の下位3桁目の値をセットする。`I+1`には下位2桁目の値をセットし、`I+2`には下位1桁目の値をセットする。

## Fx55 - LD [I], Vx

`V0`から`Vx`までの値を`I`から始まるアドレスにセットする。

## Fx65 - LD Vx, [I]

アドレス`I`から読んだ値を`V0`から`Vx`にセットする。
